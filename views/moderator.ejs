<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.2.0/css/all.min.css"
        integrity="sha512-xh6O/CkQoPOWDdYTDqeRdPCVd1SpvCA9XXcUnZS2FmJNp1coAFzvtCN9BmamE+4aHK8yyUHUSCcJHgXloTyT2A=="
        crossorigin="anonymous" referrerpolicy="no-referrer" />
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.2/dist/css/bootstrap.min.css"
        integrity="sha384-Zenh87qX5JnK2Jl0vWa8Ck2rdkQ2Bzep5IDxbcnCeuOxjzrPF/et3URy9Bv1WTRi" crossorigin="anonymous">
    <script src="https://code.jquery.com/jquery-3.6.1.min.js"
        integrity="sha256-o88AwQnZB+VDvE9tvIXrMQaPlFFSUTR+nldQm1LuPXQ=" crossorigin="anonymous"></script>
    <link rel="stylesheet" href="css/style.css" />
    <title>Moderator</title>
</head>

<body>
    <header>
        <nav class="navbar navbar-expand-lg index_header text-light">
            <div class="container-fluid">
                <div class="navbar-nav text-light index-nav">
                    <a href="/" class="nav-item nav-link">Dashboard</a>
                </div>
                 <div class="navbar-nav text-light index-nav">
                    <a href="/main" class="nav-item nav-link">Post</a>
                </div>
                <div class="navbar-nav ms-auto index-nav">
                 <a href="/moderator"><h5 class="pr-2 pt-3">Moderator</h5></a>
                    <a href="/logout" class="nav-item nav-link"><i class="fa fa-sign-out mx-2"></i>Logout</a>
                </div>
            </div>
        </nav>
    </header>
    <main>
        <div class="main-container row m-2 p-2">
            <% if(posts.length > 0){%>
            <% for(var i=0; i < posts.length; i++) { %>

            <div class="col-lg-6">
                <div class="post-pending card shadow mb-5 bg-white rounded">
                    <div class="post-header">
                        <div class="post-cover">
                            <div class="post-author">
                                <h3>
                                    <i class="fa fa-user-circle mx-0" aria-hidden="true"></i><%=posts[i].postUser.firstName + " " +
                      posts[i].postUser.lastName%>
                                </h3>
                            </div>
                            <% if(posts[i].filePath!==null){%> <% var
                  fileName=posts[i].filePath.split('\\').pop().split('/').pop();
                  var fileType= posts[i].filePath.split('.').pop();%> <%
                  if(fileType==="jpg" || fileType==="png" || fileType==="jpeg")
                  { %>
                            <div class="post-image">
                                <img src="posts/<%=fileName%>" alt="post image" width="100%" height="300px" />
                            </div>

                            <%}%> <% if(fileType==="pdf"){ %>
                            <p class="mx-2">
                                pdf file not supported
                                <a href="posts/<%=fileName%>"> Click To Download</a>
                            </p>
                            <% }%> <%}%>
                        </div>
                    </div>
                 <div class="post-body mx-2">
                   <div class="post-title">
                     <h1><%= posts[i].title%></h1>
                        </div>
                    <div class="post-summary">
                            <p><%= posts[i].content%></p>
                     </div>

                    </div>
                    <div class="post-footer">
                        <div class="d-flex justify-content-end">

                            <button class="btn btn-primary my-2 toggle-modal" data-id="<%=posts[i].id%>"
                                data-bs-toggle="modal" data-bs-target="#verifyPost"
                                onclick="$('#postid').val($(this).attr('data-id')); $('#verifyPost').modal('show');">Verify
                                Post</button>
                        </div>
                    </div>
                </div>

            </div>
            <div class="modal" id="verifyPost" role="dialog">
                <div class="modal-dialog">
                    <div class="modal-content">
                        <div class="modal-header">
                            <h4 class="modal-title text-center">Verify Post</h4>
                            <a class="close" data-bs-dismiss="modal" aria-hidden="true">
                                <i class="fa fa-times icon bg-danger text-white"></i>
                            </a>
                        </div>

                        <div class="modal-body">
                            <form name="verifyPost" class="formVerifyPost" action="/moderator/post/verify" method="post"
                                role="form" data-toggle="validator">
                                <div class="input-container">
                                    <input class="input-field" id="postid" type="hidden" name="id" class="form-control"
                                        value="" />
                                </div>
                                <div class="input-container">
                                    <!-- <i class="fa fa-description icon"></i> -->
                                    <span class="my-2">Status: </span>
                                    <select name="status" id="status" class="input-field my-0">
                                        <option value="select status" hidden selected>
                                            select post status
                                        </option>
                                        <option value="accepted" selected>Accept</option>
                                        <option value="rejected">Reject</option>
                                    </select>
                                </div>
                                <div class="container-fluid">
                                    <label>Target Group</label>
                                    <div class="row">
                                        <div class="col-lg-4"> <input class="checkbox mx-2" type="checkbox" name="department" value="ICT" />ICT</div>
                                        <div class="col-lg-4">  <input class="checkbox mx-2" type="checkbox" name="department" value="Finance" />Finance</div>
                                        <div class="col-lg-4"><input class="checkbox mx-2" type="checkbox" name="department" value="Internal Audit" />Audit</div>
                                    </div>
                                     <div class="row">
                                        <div class="col-lg-4"><input class="checkbox mx-2" type="checkbox" name="department"
                                        value="General Director" />G/Director</div>
                                  <div class="col-lg-4">
                                   <input class="checkbox mx-2" type="checkbox" name="department" value="Plan and Program" />Plan & Program
                                    </div>
                                  <div class="col-lg-4">
                                   <input class="checkbox mx-2" type="checkbox" name="department" value="Procurment" />Procurment
                                  </div>
                                 </div>
                                  <div class="row">
                                        <div class="col-lg-4"> 
                                        <input class="checkbox mx-2" type="checkbox" name="department" value="Ethics" />Ethics</div>
                                        <div class="col-lg-4">  <input class="checkbox mx-2" type="checkbox" name="department" value="Vaccine and Drug Production" />Vaccine & Drug Production</div>
                                        <div class="col-lg-4"> <input class="checkbox mx-2" type="checkbox" name="department" value="Qaulity Assurance" />Quality Assurance</div>
                                    </div> 
                                      <div class="row">
                                        <div class="col-lg-4"> 
                                          <input class="checkbox mx-2" type="checkbox" name="department" value="Engineering and Maintenance" />Engineering & Maintenance</div>
                                        <div class="col-lg-4"><input class="checkbox mx-2" type="checkbox" name="department" value="Marketing" />Marketing</div>
                                        <div class="col-lg-4"> <input class="checkbox mx-2" type="checkbox" name="department" value="HR" />Human Resource</div>  
                                    </div> 
                                    <div class="row">
                                        <div class="col-lg-4"> 
                                         <input class="checkbox mx-2" type="checkbox" name="department" value="Research and Development" />Research & Dev
                                        </div>
                                        <div class="col-lg-4"> \ <input class="checkbox mx-2" type="checkbox" name="department"
                                        value="Public" />Public</div>
                                    </div> 
                                </div>
                    
                                <div class="row my-4">
                                    <div class="col">
                                        <button class="btn btn-sm btn-login btn text-center" type="submit">
                                            Update
                                        </button>
                                    </div>
                                    <div class="col text-center">
                                        <button class="btn btn-sm btn-login btn text-center" type="reset">
                                            Reset
                                        </button>
                                    </div>
                                </div>
                            </form>
                        </div>
                        <div class="modal-footer">
                            <button type="button" class="btn btn-danger" data-bs-dismiss="modal">
                                Close
                            </button>
                        </div>
                    </div>
                </div>
            </div>
            <%} %>
            <%}
        else {%>
            <h4 class="text-center text-danger m-4 p-4">post not found</h4>
            <%}%>
  </div>
         <% if (locals.message && locals.message!='') { %>
            <script language="javascript">
                alert( "<%= message %>" );
            </script>
            <% } %>
    </main>
    <%- include('./partials/footer'); %>
    </footer>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.0/jquery.min.js"></script>
    <!-- <script src="js/login_modal.js"></script> -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.2/dist/js/bootstrap.min.js"></script>
</body>

</html>
